(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2391344a"],{5095:function(e,t,a){"use strict";a.r(t);var r,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container start-setting"},[a("el-form",{staticClass:"search-condition",attrs:{inline:!0,model:e.searchForm}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"所属系列"},model:{value:e.searchForm.series,callback:function(t){e.$set(e.searchForm,"series",t)},expression:"searchForm.series"}},e._l(e.searchForm.seriesOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"课程类型"},model:{value:e.searchForm.courseType,callback:function(t){e.$set(e.searchForm,"courseType",t)},expression:"searchForm.courseType"}},e._l(e.searchForm.courseTypeOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"所属产品线"},model:{value:e.searchForm.product,callback:function(t){e.$set(e.searchForm,"product",t)},expression:"searchForm.product"}},e._l(e.searchForm.productOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"培训名称"},model:{value:e.searchForm.trainName,callback:function(t){e.$set(e.searchForm,"trainName",t)},expression:"searchForm.trainName"}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-input",{attrs:{size:"mini",clearable:"",placeholder:"讲师姓名"},model:{value:e.searchForm.lecturer,callback:function(t){e.$set(e.searchForm,"lecturer",t)},expression:"searchForm.lecturer"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-date-picker",{attrs:{size:"mini",type:"datetimerange","range-separator":"至",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm","start-placeholder":"培训开始时间","end-placeholder":"培训结束时间"},model:{value:e.searchForm.trainTime,callback:function(t){e.$set(e.searchForm,"trainTime",t)},expression:"searchForm.trainTime"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.$t("table.search")))]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))])],1)],1)],1)],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataTable,border:"",fit:"",size:"mini",stripe:"","max-height":"420","highlight-current-row":""},on:{"sort-change":e.handleSort}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("table.id"),width:"50",type:"index"}}),a("el-table-column",{attrs:{width:"100px","header-align":"center",label:"开班编号",sortable:"custom",prop:"openingID"}}),a("el-table-column",{attrs:{"min-width":"120px","header-align":"center",label:"开班名称",sortable:"custom",prop:"openingName"}}),a("el-table-column",{attrs:{width:"150px","header-align":"center",label:"培训名称",sortable:"custom",prop:"trainingName"}}),a("el-table-column",{attrs:{width:"100px","header-align":"center",label:"讲师",sortable:"custom",prop:"lecturer"}}),a("el-table-column",{attrs:{"min-width":"140","header-align":"center",label:"培训时间",sortable:"custom",prop:"trainingTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.trainingTime)))])]}}])}),a("el-table-column",{attrs:{width:"110","header-align":"center",label:"课程类型",sortable:"custom",prop:"trainingType"}}),a("el-table-column",{attrs:{width:"110","header-align":"center",label:"班级状态",sortable:"custom",prop:"openingStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.statusMap[t.row.openingStatus]))])]}}])}),a("el-table-column",{attrs:{width:"120","header-align":"center",label:"所属产品线",sortable:"custom",prop:"bu"}}),a("el-table-column",{attrs:{width:"110","header-align":"center",align:"center",label:e.$t("table.option")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.handleEdit(t.row)}}}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.handleDel(t.row.openingID)}}}),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view",title:"查看"},on:{click:function(a){e.handleDetail(t.row)}}})]}}])})],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.pageSize,layout:"total, slot, prev, pager, next",total:e.page.totalRecord,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"startForm",attrs:{model:e.startForm,size:"mini","label-width":"120px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属产品线",prop:"product"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.product,callback:function(t){e.$set(e.startForm,"product",t)},expression:"startForm.product"}}):a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getStartTrain},model:{value:e.startForm.product,callback:function(t){e.$set(e.startForm,"product",t)},expression:"startForm.product"}},e._l(e.searchForm.productOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属系列",prop:"series"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.series,callback:function(t){e.$set(e.startForm,"series",t)},expression:"startForm.series"}}):a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getStartTrain},model:{value:e.startForm.series,callback:function(t){e.$set(e.startForm,"series",t)},expression:"startForm.series"}},e._l(e.searchForm.seriesOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属体系",prop:"system"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.system,callback:function(t){e.$set(e.startForm,"system",t)},expression:"startForm.system"}}):a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getStartTrain},model:{value:e.startForm.system,callback:function(t){e.$set(e.startForm,"system",t)},expression:"startForm.system"}},e._l(e.searchForm.systemOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"课程类型",prop:"courseType"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.courseType,callback:function(t){e.$set(e.startForm,"courseType",t)},expression:"startForm.courseType"}}):a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getStartTrain},model:{value:e.startForm.courseType,callback:function(t){e.$set(e.startForm,"courseType",t)},expression:"startForm.courseType"}},e._l(e.searchForm.courseTypeOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"培训名称",prop:"trainName"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.trainName,callback:function(t){e.$set(e.startForm,"trainName",t)},expression:"startForm.trainName"}}):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.startForm.trainName,callback:function(t){e.$set(e.startForm,"trainName",t)},expression:"startForm.trainName"}},e._l(e.startForm.trainOptions,function(e){return a("el-option",{key:e.trainingId,attrs:{label:e.trainingName,value:e.trainingName}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开班名称",prop:"classSerices"}},[a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:e.isDetail},model:{value:e.startForm.classSerices,callback:function(t){e.$set(e.startForm,"classSerices",t)},expression:"startForm.classSerices"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"讲师",prop:"lecturer"}},[a("el-input",{attrs:{autocomplete:"off",readonly:e.isDetail,maxlength:"50"},model:{value:e.startForm.lecturer,callback:function(t){e.$set(e.startForm,"lecturer",t)},expression:"startForm.lecturer"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"培训时间",prop:"trainTime"}},[a("el-date-picker",{attrs:{type:"datetime",size:"mini",format:"yyyy-MM-dd HH:mm",readonly:e.isDetail,"prefix-icon":"null",placeholder:"选择培训时间"},model:{value:e.startForm.trainTime,callback:function(t){e.$set(e.startForm,"trainTime",t)},expression:"startForm.trainTime"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"语言",prop:"language"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.language,callback:function(t){e.$set(e.startForm,"language",t)},expression:"startForm.language"}}):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.startForm.language,callback:function(t){e.$set(e.startForm,"language",t)},expression:"startForm.language"}},e._l(e.startForm.languageOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开班形式",prop:"openClassType"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",readonly:"",maxlength:"4"},model:{value:e.startForm.openClassType,callback:function(t){e.$set(e.startForm,"openClassType",t)},expression:"startForm.openClassType"}}):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.startForm.openClassType,callback:function(t){e.$set(e.startForm,"openClassType",t)},expression:"startForm.openClassType"}},e._l(e.startForm.openClassTypeOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开班地点",prop:"startLocation"}},[a("el-input",{attrs:{autocomplete:"off",readonly:e.isDetail,maxlength:"50"},model:{value:e.startForm.startLocation,callback:function(t){e.$set(e.startForm,"startLocation",t)},expression:"startForm.startLocation"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"课件下载地址",prop:"coursewareAddr"}},[a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"128",readonly:e.isDetail},model:{value:e.startForm.coursewareAddr,callback:function(t){e.$set(e.startForm,"coursewareAddr",t)},expression:"startForm.coursewareAddr"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"在线培训地址",prop:"trainAddr"}},[a("el-input",{attrs:{autocomplete:"off",readonly:e.isDetail,maxlength:"128"},model:{value:e.startForm.trainAddr,callback:function(t){e.$set(e.startForm,"trainAddr",t)},expression:"startForm.trainAddr"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"可容纳人数",prop:"capacity"}},[a("el-input",{attrs:{autocomplete:"off",readonly:e.isDetail,maxlength:"4"},model:{value:e.startForm.capacity,callback:function(t){e.$set(e.startForm,"capacity",t)},expression:"startForm.capacity"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否需要考试",prop:"isExam"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.isExam,callback:function(t){e.$set(e.startForm,"isExam",t)},expression:"startForm.isExam"}}):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.startForm.isExam,callback:function(t){e.$set(e.startForm,"isExam",t)},expression:"startForm.isExam"}},e._l(e.startForm.isExamOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"接口人",prop:"publisher"}},[a("el-input",{attrs:{autocomplete:"off",readonly:e.isDetail,maxlength:"20"},model:{value:e.startForm.publisher,callback:function(t){e.$set(e.startForm,"publisher",t)},expression:"startForm.publisher"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"咨询电话",prop:"telephone"}},[a("el-input",{attrs:{autocomplete:"off",readonly:e.isDetail,maxlength:"20"},model:{value:e.startForm.telephone,callback:function(t){e.$set(e.startForm,"telephone",t)},expression:"startForm.telephone"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报名方式",prop:"regType"}},[e.isDetail?a("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64",readonly:""},model:{value:e.startForm.regType,callback:function(t){e.$set(e.startForm,"regType",t)},expression:"startForm.regType"}}):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.startForm.regType,callback:function(t){e.$set(e.startForm,"regType",t)},expression:"startForm.regType"}},e._l(e.startForm.regTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"报名须知",prop:"regNote"}},[a("el-input",{attrs:{readonly:e.isDetail,type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},model:{value:e.startForm.regNote,callback:function(t){e.$set(e.startForm,"regNote",t)},expression:"startForm.regNote"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isDetail?e._e():a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e.isDetail?a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")]):e._e(),e.isDetail?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submtForm("startForm")}}},[e._v("确 定")])],1)],1)],1)},s=[],o=a("ade3"),i=a("be94"),n=(a("cadf"),a("551c"),a("097d"),a("2f62")),c=a("c466"),m=(r={filters:{formatDate:function(e){var t=new Date(e);return Object(c["a"])(t,"yyyy-MM-dd hh:mm")}},computed:Object(i["a"])({},Object(n["c"])(["employeeId","employeeName"])),data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("请输入可容纳人数"));var r=/^\+?[1-9][0-9]*$/;return r.test(t)?a():a(new Error("只能输入正整数"))},a=function(t,a,r){return"面授"!==e.startForm.openClassType||a?r():r(new Error("请输入开班地点"))};return{dataTable:[],listLoading:!1,page:{currentPage:1,pageSize:100,totalRecord:0,sortColumn:"openingID",sortType:"desc"},dialogTitle:"添加开班计划",dialogVisible:!1,isEdit:!1,isDetail:!1,statusMap:{1:"可报名",2:"已满员",3:"已结束"},rules:{product:[{required:!0,message:"请选择产品线",trigger:"change"}],series:[{required:!0,message:"请选择所属系列",trigger:"change"}],system:[{required:!0,message:"请选择所属体系",trigger:"change"}],courseType:[{required:!0,message:"请选择课程类型",trigger:"change"}],trainName:[{required:!0,message:"请选择培训名称",trigger:"change"}],classSerices:[{required:!0,message:"请输入开班系列名称",trigger:"blur"}],lecturer:[{required:!0,message:"请输入讲师",trigger:"blur"}],trainTime:[{required:!0,message:"请选择培训时间",trigger:"blur"}],openClassType:[{required:!0,message:"请选择开班形式",trigger:"change"}],startLocation:[{validator:a,trigger:"blur"}],capacity:[{trigger:"blur",validator:t,required:!0}],isExam:[{required:!0,message:"请选择是否需要考试",trigger:"change"}],regType:[{required:!0,message:"请选择报名方式",trigger:"change"}]}}},mounted:function(){var e=this;e.getStartProduct(),e.getStartSeries(),e.getStartTrain(),e.handleFilter(null,e.page)}},Object(o["a"])(r,"computed",Object(i["a"])({},Object(n["e"])({dataSource:function(e){return e.openClassStore.tableDataSource},searchForm:function(e){return e.openClassStore.searchForm},startForm:function(e){return e.openClassStore.startForm}}))),Object(o["a"])(r,"watch",{dataSource:function(e){this.dataTable=e.list,this.page.totalRecord=e.total}}),Object(o["a"])(r,"methods",Object(i["a"])({},Object(n["b"])(["getStartSeries","getStartSystem","getStartProduct","getStartTrain","getStartTableData","setStartInfo"]),{handleCurrentChange:function(e){var t=this;t.page.currentPage=e,t.handleFilter(null,t.page)},handleSort:function(e){e.prop&&(this.page.sortColumn=e.prop,this.page.sortType="descending"===e.order?"desc":"asc",this.handleFilter(null,this.page))},handleFilter:function(e,t){var a=this;t||(a.page.currentPage=1),a.listLoading=!0,a.getStartTableData(a.page).then(function(){a.listLoading=!1}).catch(function(){a.listLoading=!1})},handleCreate:function(){var e=this;e.getStartProduct(),e.getStartSeries(),e.getStartSystem(),e.dialogTitle="添加开班计划",e.dialogVisible=!0,e.isEdit=!1,e.isDetail=!1,e.$refs.startForm.resetFields()},submtForm:function(){var e=this;e.$refs.startForm.validate(function(t){if(!t)return!1;var a="addStartInfo";e.isEdit&&(a="editStartInfo"),e.$store.dispatch(a).then(function(t){t.success?(e.$message.success("操作成功"),e.handleFilter(null,e.page)):e.$message.error("操作失败"),e.dialogVisible=!1})})},clearValidate:function(){this.$refs.startForm&&this.$refs.startForm.clearValidate()},handleDel:function(e){var t=this;t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("delStartInfo",e).then(function(e){e.success?(t.$message.success("操作成功"),t.handleFilter(null,t.page)):t.$message.error("操作失败")})})},handleEdit:function(e){var t=this;t.getStartProduct(),t.getStartSeries(),t.getStartSystem(),t.dialogTitle="编辑开班计划",t.dialogVisible=!0,t.isDetail=!1,t.isEdit=!0,e.isDetail=t.isDetail,t.setStartInfo(e),t.clearValidate()},handleDetail:function(e){var t=this;t.dialogTitle="查看开班计划",t.dialogVisible=!0,t.isDetail=!0,t.isEdit=!1,e.isDetail=t.isDetail,t.setStartInfo(e),t.clearValidate()}})),r),u=m,p=(a("9241"),a("2877")),d=Object(p["a"])(u,l,s,!1,null,null,null);d.options.__file="openClassSetting.vue";t["default"]=d.exports},"7cce":function(e,t,a){},9241:function(e,t,a){"use strict";var r=a("7cce"),l=a.n(r);l.a}}]);
//# sourceMappingURL=chunk-2391344a.3b6b20a2.js.map