{"version":3,"sources":["webpack:///./src/views/organizationalStructure/humanSystem.vue?f363","webpack:///./src/views/organizationalStructure/humanSystem.vue?727f","webpack:///src/views/organizationalStructure/humanSystem.vue","webpack:///./src/views/organizationalStructure/humanSystem.vue?ede8","webpack:///./src/views/organizationalStructure/humanSystem.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_humanSystem_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss_scope_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_humanSystem_vue_vue_type_style_index_0_rel_stylesheet_2Fscss_lang_scss_scope_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","gutter","span","shadow","slot","_v","staticStyle","height","id","ref","inline","model","searchForm","label","width","placeholder","size","disabled","value","callback","$$v","$set","expression","clearable","on","change","regionChange","region","_l","item","key","costCenter","type","icon","click","$event","handleFilter","_s","$t","directives","name","rawName","justify","current-page","currentPage","page-size","pageSize","layout","total","prev-text","next-text","size-change","handleSizeChange","current-change","update:currentPage","margin-top","handleSave","staticRenderFns","humanSystemvue_type_script_lang_js_","data","loading","currentTreeId","employeeDataSource","employees","gender","employeeName","employeeID","relationSetting","view","showIcon","edit","enable","showRemoveBtn","showRenameBtn","drag","prev","next","inner","simpleData","beforeDrag","beforeDrag1","beforeDrop","beforeDrop1","empListSetting","beforeDrag2","beforeDrop2","computed","Object","objectSpread","vuex_esm","regionOptions","state","eSettingsStore","regionData","costCenterOptions","costCenterData","get","$store","set","val","commit","mounted","renderEmpRelationTree","watch","$","fn","zTree","init","map","staffId","staffName","methods","treeId","treeNodes","disDrop","targetNode","moveType","level","$message","warning","arg","length","slice","vm","ztreeObj","getZTreeObj","nodes","getNodesByFilter","getTMEmployees","then","res","success","filter","_","contains","pluck","param","saveTeamInfos","error","zNodes","push","pId","open","projectName","pmName","getEmployeesByTeam","projectID","children","organizationalStructure_humanSystemvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-ee73ad32.97288bc0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./humanSystem.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss&scope=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./humanSystem.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss&scope=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"人力体系树\")]),_c('div',{staticClass:\"ztree\",staticStyle:{\"height\":\"390px\"},attrs:{\"id\":\"empRelationTree\"}})])],1),_c('el-col',{staticClass:\"em-list\",attrs:{\"span\":14}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"人力体系节点\")]),_c('el-form',{ref:\"searchForm\",staticClass:\"em-wrap\",attrs:{\"inline\":true,\"model\":_vm.searchForm}},[_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"193px\"},attrs:{\"placeholder\":\"PDU\",\"size\":\"mini\",\"disabled\":\"\"},model:{value:(_vm.searchForm.pdu),callback:function ($$v) {_vm.$set(_vm.searchForm, \"pdu\", $$v)},expression:\"searchForm.pdu\"}})],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-select',{attrs:{\"size\":\"mini\",\"clearable\":\"\",\"placeholder\":\"性别\"},model:{value:(_vm.searchForm.gender),callback:function ($$v) {_vm.$set(_vm.searchForm, \"gender\", $$v)},expression:\"searchForm.gender\"}},[_c('el-option',{attrs:{\"label\":\"男\",\"value\":\"0\"}}),_c('el-option',{attrs:{\"label\":\"女\",\"value\":\"1\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-select',{attrs:{\"size\":\"mini\",\"clearable\":\"\",\"placeholder\":\"地域\"},on:{\"change\":_vm.regionChange},model:{value:(_vm.region),callback:function ($$v) {_vm.region=$$v},expression:\"region\"}},_vm._l((_vm.regionOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}))],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-select',{attrs:{\"size\":\"mini\",\"clearable\":\"\",\"placeholder\":\"成本中心\"},model:{value:(_vm.costCenter),callback:function ($$v) {_vm.costCenter=$$v},expression:\"costCenter\"}},_vm._l((_vm.costCenterOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}))],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"193px\"},attrs:{\"placeholder\":\"姓名\",\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.searchForm.employeeName),callback:function ($$v) {_vm.$set(_vm.searchForm, \"employeeName\", $$v)},expression:\"searchForm.employeeName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"193px\"},attrs:{\"placeholder\":\"工号\",\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.searchForm.employeeID),callback:function ($$v) {_vm.$set(_vm.searchForm, \"employeeID\", $$v)},expression:\"searchForm.employeeID\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleFilter();}}},[_vm._v(_vm._s(_vm.$t(\"table.search\")))])],1)],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"ztree\",staticStyle:{\"height\":\"260px\"},attrs:{\"id\":\"empListTree\"}}),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"slot,prev, pager, next\",\"total\":_vm.total,\"prev-text\":\"上一页\",\"next-text\":\"下一页\"},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleSizeChange,\"update:currentPage\":function($event){_vm.currentPage=$event}}})],1)],1)],1)],1),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-circle-plus-outline\",\"size\":\"mini\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保 存\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"app-container\">\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"10\">\r\n        <el-card shadow=\"never\">\r\n          <div slot=\"header\" class=\"clearfix\">人力体系树</div>\r\n          <div id=\"empRelationTree\" class=\"ztree\" style=\"height:390px;\"></div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"14\" class=\"em-list\">\r\n        <el-card shadow=\"never\">\r\n          <div slot=\"header\" class=\"clearfix\">人力体系节点</div>\r\n          <el-form :inline=\"true\" class=\"em-wrap\" :model=\"searchForm\" ref=\"searchForm\">\r\n            <el-form-item label>\r\n              <el-input\r\n                placeholder=\"PDU\"\r\n                size=\"mini\"\r\n                v-model=\"searchForm.pdu\"\r\n                style=\"width:193px\"\r\n                disabled\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label>\r\n              <el-select v-model=\"searchForm.gender\" size=\"mini\" clearable placeholder=\"性别\">\r\n                <el-option label=\"男\" value=\"0\"></el-option>\r\n                <el-option label=\"女\" value=\"1\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label>\r\n              <el-select\r\n                v-model=\"region\"\r\n                size=\"mini\"\r\n                clearable\r\n                placeholder=\"地域\"\r\n                @change=\"regionChange\"\r\n              >\r\n                <el-option v-for=\"item in regionOptions\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label>\r\n              <el-select v-model=\"costCenter\" size=\"mini\" clearable placeholder=\"成本中心\">\r\n                <el-option\r\n                  v-for=\"item in costCenterOptions\"\r\n                  :key=\"item\"\r\n                  :label=\"item\"\r\n                  :value=\"item\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label>\r\n              <el-input\r\n                placeholder=\"姓名\"\r\n                size=\"mini\"\r\n                v-model=\"searchForm.employeeName\"\r\n                clearable\r\n                style=\"width:193px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label>\r\n              <el-input\r\n                placeholder=\"工号\"\r\n                size=\"mini\"\r\n                v-model=\"searchForm.employeeID\"\r\n                clearable\r\n                style=\"width:193px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"handleFilter();\"\r\n                icon=\"el-icon-search\"\r\n                size=\"mini\"\r\n              >{{ $t(\"table.search\") }}</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div v-loading=\"loading\" id=\"empListTree\" class=\"ztree\" style=\"height:260px;\"></div>\r\n          <el-row type=\"flex\" justify=\"end\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleSizeChange\"\r\n              :current-page.sync=\"currentPage\"\r\n              :page-size=\"pageSize\"\r\n              layout=\"slot,prev, pager, next\"\r\n              :total=\"total\"\r\n              prev-text=\"上一页\"\r\n              next-text=\"下一页\"\r\n            ></el-pagination>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row type=\"flex\" justify=\"end\" style=\"margin-top:20px\">\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"handleSave\"\r\n        icon=\"el-icon-circle-plus-outline\"\r\n        size=\"mini\"\r\n      >保 存</el-button>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"ztree\";\r\nimport { mapState, mapMutations, mapActions } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    let vm = this;\r\n    return {\r\n      loading: false,\r\n      currentTreeId: \"\",\r\n      currentPage: 1,\r\n      total: 0,\r\n      pageSize: 100,\r\n      employeeDataSource: [],\r\n      employees: [],\r\n      searchForm: {\r\n        gender: \"\",\r\n        employeeName: \"\",\r\n        employeeID: \"\"\r\n      },\r\n      relationSetting: {\r\n        view: {\r\n          showIcon: false\r\n        },\r\n        edit: {\r\n          enable: true,\r\n          showRemoveBtn: false,\r\n          showRenameBtn: false,\r\n          drag: {\r\n            prev: false,\r\n            next: false,\r\n            inner: true\r\n          }\r\n        },\r\n        data: {\r\n          simpleData: {\r\n            enable: true\r\n          }\r\n        },\r\n        callback: {\r\n          beforeDrag: this.beforeDrag1,\r\n          beforeDrop: this.beforeDrop1\r\n        }\r\n      },\r\n      empListSetting: {\r\n        edit: {\r\n          enable: true,\r\n          showRemoveBtn: false,\r\n          showRenameBtn: false\r\n        },\r\n        data: {\r\n          simpleData: {\r\n            enable: true\r\n          }\r\n        },\r\n        callback: {\r\n          beforeDrag: this.beforeDrag2,\r\n          beforeDrop: this.beforeDrop2\r\n        }\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      regionOptions: state => state.eSettingsStore.regionData,\r\n      costCenterOptions: state => state.eSettingsStore.costCenterData\r\n    }),\r\n    region: {\r\n      get() {\r\n        return this.$store.state.eSettingsStore.region;\r\n      },\r\n      set(val) {\r\n        this.$store.commit(\"updateTMRegino\", val);\r\n      }\r\n    },\r\n    costCenter: {\r\n      get() {\r\n        return this.$store.state.eSettingsStore.costCenter;\r\n      },\r\n      set(val) {\r\n        this.$store.commit(\"updateTMCostCenter\", val);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.renderEmpRelationTree({});\r\n  },\r\n  watch: {\r\n    employees(data) {\r\n      $.fn.zTree.init(\r\n        $(\"#empListTree\"),\r\n        this.empListSetting,\r\n        data.map(item => {\r\n          return {\r\n            id: item.staffId,\r\n            employeeName: item.staffName,\r\n            name: item.staffName + \" (\" + item.staffId + \")\"\r\n          };\r\n        })\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      \"getAreaAndCuBycondition\",\r\n      \"getTMEmployees\",\r\n      \"getEmployeesByTeam\",\r\n      \"saveTeamInfos\"\r\n    ]),\r\n    beforeDrag1(treeId, treeNodes) {\r\n      this.currentTreeId = treeId;\r\n      return !treeNodes[0].disDrop;\r\n    },\r\n    beforeDrop1(treeId, treeNodes, targetNode, moveType) {\r\n      return !targetNode && this.currentTreeId !== treeId;\r\n    },\r\n    beforeDrag2(treeId, treeNodes) {\r\n      this.currentTreeId = treeId;\r\n      return true;\r\n    },\r\n    beforeDrop2(treeId, treeNodes, targetNode, moveType) {\r\n      if (targetNode.level > 0) {\r\n        this.$message.warning(\"只能拖动到项目组名称(一级节点)上面\");\r\n        return false;\r\n      }\r\n      return !!targetNode && this.currentTreeId !== treeId;\r\n    },\r\n    handleSizeChange(arg) {\r\n      this.total = this.employeeDataSource.length;\r\n      this.employees = this.employeeDataSource.slice(\r\n        (this.currentPage - 1) * 100,\r\n        this.currentPage * 100 + 1\r\n      );\r\n    },\r\n    regionChange() {\r\n      this.$store.commit(\"updateCostCenterData\");\r\n    },\r\n    handleFilter() {\r\n      let vm = this;\r\n      let ztreeObj = $.fn.zTree.getZTreeObj(\"empRelationTree\");\r\n      let nodes = ztreeObj.getNodesByFilter(item => {\r\n        return item.level > 0;\r\n      });\r\n      vm.currentPage = 1;\r\n      vm.loading = true;\r\n      vm.getTMEmployees(vm.searchForm).then(res => {\r\n        if (res.success) {\r\n          vm.employeeDataSource = res.data.filter(item => {\r\n            return !_.contains(_.pluck(nodes, \"id\"), item.staffId);\r\n          });\r\n        } else {\r\n          vm.employeeDataSource = [];\r\n        }\r\n        vm.loading = false;\r\n        vm.handleSizeChange();\r\n      });\r\n    },\r\n    handleSave() {\r\n      let vm = this;\r\n      let ztreeObj = $.fn.zTree.getZTreeObj(\"empRelationTree\");\r\n      if (!ztreeObj) {\r\n        return;\r\n      }\r\n      let nodes = ztreeObj.getNodesByFilter(item => {\r\n        return item.level > 0;\r\n      });\r\n      let param = nodes.map(item => {\r\n        return {\r\n          staffId: item.id + \"\",\r\n          staffName: item.employeeName\r\n        };\r\n      });\r\n\r\n      vm.saveTeamInfos(param).then(res => {\r\n        if (res.success) {\r\n          vm.$message.success(\"人员设置保存成功\");\r\n        } else {\r\n          vm.$message.error(\"人员设置保存失败\");\r\n        }\r\n      });\r\n    },\r\n    renderEmpRelationTree(data) {\r\n      let vm = this;\r\n      vm.zNodes = [];\r\n      vm.zNodes.push({\r\n        id: 1,\r\n        pId: 0,\r\n        open: true,\r\n        disDrop: true,\r\n        name:\r\n          (data.projectName || \"项目组名称\") +\r\n          \"（\" +\r\n          (data.pmName || \"PM姓名\") +\r\n          \"）\"\r\n      });\r\n      vm.getEmployeesByTeam(data.projectID).then(res => {\r\n        if (res.success) {\r\n          vm.zNodes[0].children = res.data.map(item => {\r\n            return {\r\n              id: item.staffId,\r\n              employeeName: item.staffName,\r\n              name: item.staffName + \" (\" + item.staffId + \")\"\r\n            };\r\n          });\r\n        }\r\n        $.fn.zTree.init($(\"#empRelationTree\"), vm.relationSetting, vm.zNodes);\r\n        vm.handleFilter();\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scope>\r\n.ztree {\r\n  overflow: auto;\r\n}\r\n.tree-wrap-border {\r\n  border: 1px solid #dcdfe6;\r\n}\r\n.em-list .el-tag {\r\n  margin-right: 10px;\r\n}\r\n#empListTree li {\r\n  display: inline-block;\r\n  margin-bottom: 10px;\r\n}\r\n#empListTree li .button {\r\n  display: none;\r\n}\r\n#empListTree a {\r\n  margin-right: 10px;\r\n  background-color: rgba(64, 158, 255, 0.1);\r\n  display: inline-block;\r\n  padding: 0 10px;\r\n  height: 32px;\r\n  line-height: 30px;\r\n  font-size: 12px;\r\n  color: #409eff;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n  border: 1px solid rgba(64, 158, 255, 0.2);\r\n  white-space: nowrap;\r\n}\r\n.em-wrap .el-form-item {\r\n  margin-bottom: 7px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./humanSystem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./humanSystem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./humanSystem.vue?vue&type=template&id=77038570&\"\nimport script from \"./humanSystem.vue?vue&type=script&lang=js&\"\nexport * from \"./humanSystem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./humanSystem.vue?vue&type=style&index=0&rel=stylesheet%2Fscss&lang=scss&scope=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"humanSystem.vue\"\nexport default component.exports"],"sourceRoot":""}