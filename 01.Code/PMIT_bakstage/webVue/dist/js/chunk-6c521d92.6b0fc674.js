(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c521d92"],{cfd0:function(e,t,a){},e43c:function(e,t,a){"use strict";var r=a("cfd0"),n=a.n(r);n.a},e4e8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card",staticStyle:{width:"100%"},attrs:{shadow:"never","body-style":{padding:"20px 20px 0px 20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("数据库备份")]),a("el-row",[a("el-form",{ref:"backupForm",attrs:{model:e.backupForm,size:"mini","label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"备份原因",prop:"reason"}},[a("el-row",[a("el-input",{staticStyle:{width:"80%","margin-right":"15px"},attrs:{maxlength:"255"},model:{value:e.backupForm.reason,callback:function(t){e.$set(e.backupForm,"reason",t)},expression:"backupForm.reason"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleBackup()}}},[e._v("开始备份")])],1)],1)],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"never","body-style":{padding:"20px 20px 0px 20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("数据库恢复")]),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{padding:"3px 15px"},attrs:{type:"text",title:"刷新列表"},on:{click:e.handleRefresh}})],1),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"",size:"mini",stripe:"","max-height":"245","highlight-current-row":""},on:{"sort-change":e.handleSort}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("table.id"),width:"80",type:"index"}}),a("el-table-column",{attrs:{width:"100px","header-align":"center",label:"备份人员编号",prop:"employeeId"}}),a("el-table-column",{attrs:{width:"100px","header-align":"center",label:"备份人员姓名",prop:"employeeName"}}),a("el-table-column",{attrs:{width:"150px","header-align":"center",label:"备份时间",prop:"backupTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.backupTime)))])]}}])}),a("el-table-column",{attrs:{width:"200px","header-align":"center",label:"备份文件名称",prop:"dataName"}}),a("el-table-column",{attrs:{"min-width":"100px","header-align":"center",label:"备份原因",prop:"reasonRemark"}}),a("el-table-column",{attrs:{align:"center",width:"50","header-align":"center",label:e.$t("table.option")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-back",size:"mini",title:"恢复"},on:{click:function(a){e.handleRestore(t.row.dataName)}}})]}}])})],1)],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.pageSize,layout:"total, slot, prev, pager, next",total:e.page.totalRecord,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],i=a("be94"),l=a("c466"),s=a("2f62"),o={filters:{formatDate:function(e){var t=new Date(e);return Object(l["a"])(t,"yyyy-MM-dd hh:mm:ss")}},data:function(){return{loading:!1,activeTab:"backup",tableData:[],backupForm:{reason:""},rules:{reason:[{required:!0,message:"请输入备份原因",trigger:"blur"}]},page:{currentPage:1,totalRecord:0,pageSize:10}}},created:function(){this.getBackupFileList()},computed:Object(i["a"])({},Object(s["c"])(["employeeId","empolyeeName"])),methods:{handleBackup:function(){var e=this,t=this;t.$refs.backupForm.validate(function(a){if(!a)return!1;var r={employeeId:e.employeeId,dataName:t.backupForm.fileName,reasonRemark:t.backupForm.reason};t.$store.dispatch("backup",r).then(function(e){e.success?(t.$message.success("备份成功"),t.backupForm.reason="",t.page.currentPage=1,t.getBackupFileList()):t.$message.error("备份失败")})})},getBackupFileList:function(){var e=this;this.loading=!0;var t={pageNum:this.page.currentPage,pageSize:this.page.pageSize};this.$store.dispatch("getBackupList",t).then(function(t){t.success&&(e.tableData=t.data.list,e.page.totalRecord=t.data.total),e.loading=!1})},handleCurrentChange:function(e){this.page.currentPage=e,this.getBackupFileList()},handleRestore:function(e){var t=this;this.$store.dispatch("restore",e).then(function(e){e.success?t.$message.success("恢复成功"):t.$message.error("恢复失败")})},handleRefresh:function(){this.page.currentPage=1,this.getBackupFileList()}}},c=o,p=(a("e43c"),a("2877")),u=Object(p["a"])(c,r,n,!1,null,null,null);u.options.__file="backupRestore.vue";t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-6c521d92.6b0fc674.js.map