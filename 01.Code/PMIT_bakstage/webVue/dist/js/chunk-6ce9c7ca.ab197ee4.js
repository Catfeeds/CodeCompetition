(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ce9c7ca"],{"038f":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{size:"mini",clearable:"",placeholder:"所属体系"},model:{value:e.searchForm.system,callback:function(t){e.$set(e.searchForm,"system",t)},expression:"searchForm.system"}},e._l(e.systemOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),r("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",size:"mini",placeholder:"课程类型"},model:{value:e.searchForm.courseType,callback:function(t){e.$set(e.searchForm,"courseType",t)},expression:"searchForm.courseType"}},e._l(e.courseTypeOptions,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),r("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",size:"mini",placeholder:"所属产品线"},model:{value:e.searchForm.product,callback:function(t){e.$set(e.searchForm,"product",t)},expression:"searchForm.product"}},e._l(e.productOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),r("el-input",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{size:"mini",clearable:"",placeholder:"培训名称"},model:{value:e.searchForm.trainName,callback:function(t){e.$set(e.searchForm,"trainName",t)},expression:"searchForm.trainName"}}),r("el-input",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{size:"mini",clearable:"",placeholder:"所属系列"},model:{value:e.searchForm.series,callback:function(t){e.$set(e.searchForm,"series",t)},expression:"searchForm.series"}}),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.$t("table.search")))]),r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("table.add")))])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"",size:"mini",stripe:"","max-height":"420","highlight-current-row":""}},[r("el-table-column",{attrs:{"header-align":"center",align:"center",label:e.$t("table.id"),width:"50",type:"index"}}),r("el-table-column",{attrs:{width:"140px","header-align":"center",label:"培训编号",sortable:"",prop:"trainingId"}}),r("el-table-column",{attrs:{"min-width":"120px","header-align":"center",label:"培训名称",sortable:"",prop:"trainingName","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right-end",title:"培训详情",width:"480",trigger:"hover"}},[r("el-form",{attrs:{size:"mini","label-width":"120px"}},[r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"培训编号"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.trainingId,callback:function(r){e.$set(t.row,"trainingId",r)},expression:"scope.row.trainingId"}})],1)],1)],1),r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"培训名称"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.trainingName,callback:function(r){e.$set(t.row,"trainingName",r)},expression:"scope.row.trainingName"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属系列"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.series,callback:function(r){e.$set(t.row,"series",r)},expression:"scope.row.series"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属体系"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.sort,callback:function(r){e.$set(t.row,"sort",r)},expression:"scope.row.sort"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"课程类型"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.classType,callback:function(r){e.$set(t.row,"classType",r)},expression:"scope.row.classType"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"培训类型"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.type,callback:function(r){e.$set(t.row,"type",r)},expression:"scope.row.type"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"培训时长(小时)"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.trainingDuration,callback:function(r){e.$set(t.row,"trainingDuration",r)},expression:"scope.row.trainingDuration"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属产品线"}},[r("el-input",{attrs:{readonly:""},model:{value:t.row.bu,callback:function(r){e.$set(t.row,"bu",r)},expression:"scope.row.bu"}})],1)],1)],1),r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"培训简介"}},[r("el-input",{attrs:{readonly:"",type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},model:{value:t.row.trainingDes,callback:function(r){e.$set(t.row,"trainingDes",r)},expression:"scope.row.trainingDes"}})],1)],1)],1)],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(t.row.trainingName))])],1)]}}])}),r("el-table-column",{attrs:{"min-width":"100px","header-align":"center",label:"所属系列",sortable:"",prop:"series"}}),r("el-table-column",{attrs:{"min-width":"100px","header-align":"center",label:"所属体系",sortable:"",prop:"sort"}}),r("el-table-column",{attrs:{"min-width":"100","header-align":"center",label:"课程类型",sortable:"",prop:"type"}}),r("el-table-column",{attrs:{"min-width":"110","header-align":"center",label:"所属产品线",sortable:"",prop:"bu"}}),r("el-table-column",{attrs:{width:"90","header-align":"center",label:"创建人",sortable:"",prop:"creatorName"}}),r("el-table-column",{attrs:{"min-width":"110","header-align":"center",label:"最后更新人",sortable:"",prop:"updateName"}}),r("el-table-column",{attrs:{"min-width":"140","header-align":"center",label:"最后更新时间",sortable:"",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),r("el-table-column",{attrs:{align:"center",label:e.$t("table.option"),width:"80","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit",title:"编辑"},on:{click:function(r){e.handleEdit(t.row)}}}),r("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(r){e.handleDel(t.row.trainingId)}}})]}}])})],1),r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-size":e.page.pageSize,layout:"total, slot, prev, pager, next",total:e.page.totalRecord,"prev-text":"上一页","next-text":"下一页"},on:{"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"45%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"trainForm",attrs:{model:e.trainForm,size:"mini","label-width":"120px",rules:e.rules}},[e.isEdit?r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"培训编号",prop:"trainId"}},[r("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.trainForm.trainId,callback:function(t){e.$set(e.trainForm,"trainId",t)},expression:"trainForm.trainId"}})],1)],1)],1):e._e(),r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"培训名称",prop:"trainName"}},[r("el-input",{attrs:{autocomplete:"off",required:"",maxlength:"64"},model:{value:e.trainForm.trainName,callback:function(t){e.$set(e.trainForm,"trainName",t)},expression:"trainForm.trainName"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属系列",prop:"series"}},[r("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:e.trainForm.series,callback:function(t){e.$set(e.trainForm,"series",t)},expression:"trainForm.series"}},e._l(e.seriesOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属体系",prop:"system"}},[r("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:e.trainForm.system,callback:function(t){e.$set(e.trainForm,"system",t)},expression:"trainForm.system"}},e._l(e.systemOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"课程类型",prop:"courseType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.trainForm.courseType,callback:function(t){e.$set(e.trainForm,"courseType",t)},expression:"trainForm.courseType"}},e._l(e.courseTypeOptions,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"培训类型",prop:"trainType"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.trainForm.trainType,callback:function(t){e.$set(e.trainForm,"trainType",t)},expression:"trainForm.trainType"}},e._l(e.trainTypeOptions,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"培训时长(小时)",prop:"trainTime"}},[r("el-input",{attrs:{autocomplete:"off",maxlength:"4"},model:{value:e.trainForm.trainTime,callback:function(t){e.$set(e.trainForm,"trainTime",t)},expression:"trainForm.trainTime"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属产品线",prop:"product"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.trainForm.product,callback:function(t){e.$set(e.trainForm,"product",t)},expression:"trainForm.product"}},e._l(e.productOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),r("el-form-item",{attrs:{label:"培训简介",prop:"description"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none"},model:{value:e.trainForm.description,callback:function(t){e.$set(e.trainForm,"description",t)},expression:"trainForm.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submtForm("trainForm")}}},[e._v("确 定")])],1)],1)],1)},a=[],s=(r("55dd"),r("be94")),n=(r("cadf"),r("551c"),r("097d"),r("2f62")),l=r("c466"),o=r("60fe"),c={filters:{formatDate:function(e){var t=new Date(e);return Object(l["a"])(t,"yyyy-MM-dd hh:mm:ss")}},computed:Object(s["a"])({},Object(n["c"])(["employeeId","employeeName"])),data:function(){var e=function(e,t,r){return t?isNaN(t)?r(new Error("只能输入整数和小数")):r():r(new Error("请输入培训时长"))};return{systemOptions:[],courseTypeOptions:o["a"].COURSE_TYPE,productOptions:[],trainTypeOptions:o["a"].TRAIN_TYPE,seriesOptions:[],searchForm:{system:"",courseType:"",product:"",trainName:"",series:""},trainForm:{trainId:"",trainName:"",description:"",series:"",system:"",courseType:"",trainType:"",trainTime:"",product:""},list:null,initList:[],listLoading:!1,page:{pageNum:1,pageSize:10,totalRecord:0},dialogTitle:"添加培训信息",dialogVisible:!1,isEdit:!1,rules:{trainName:[{required:!0,message:"请输入培训名称",trigger:"blur"}],description:[{required:!0,message:"请输入培训简介",trigger:"blur"}],series:[{required:!0,message:"请选择/输入所属系列",trigger:"change"}],system:[{required:!0,message:"请选择/输入所属体系",trigger:"change"}],courseType:[{required:!0,message:"请选择课程类型",trigger:"change"}],trainType:[{required:!0,message:"请选择培训类型",trigger:"change"}],trainTime:[{trigger:"blur",validator:e,required:!0}],product:[{required:!0,message:"请选择产品线",trigger:"change"}]}}},mounted:function(){this.getProductInfo(),this.getSeries(),this.getSystem(),this.getTrainingList()},methods:{handleCurrentChange:function(e){var t=this;t.page.currentPage=e,t.list=t.initList.slice((e-1)*t.page.pageSize,e*t.page.pageSize)},handleFilter:function(){this.page.currentPage=1,this.getTrainingList()},getTrainingList:function(){var e=this,t={bu:e.searchForm.product,series:e.searchForm.series,sort:e.searchForm.system,trainingName:e.searchForm.trainName,classType:e.searchForm.courseType};e.listLoading=!0,e.$store.dispatch("getTrainingList",t).then(function(t){t.success?(e.initList=t.data,e.list=e.initList.slice(0,e.page.pageSize),e.page.totalRecord=t.data.length):(e.list=[],e.page.totalRecord=0),e.listLoading=!1}).catch(function(){e.list=[],e.listLoading=!1})},handleCreate:function(){this.isEdit=!1,this.trainForm.trainId="",this.trainForm.trainName="",this.trainForm.description="",this.trainForm.series="",this.trainForm.system="",this.trainForm.courseType="",this.trainForm.trainType="",this.trainForm.trainTime="",this.trainForm.product="",this.dialogTitle="添加培训信息",this.dialogVisible=!0,this.clearValidate(),this.getProductInfo(),this.getSeries(),this.getSystem()},submtForm:function(){var e=this;e.$refs.trainForm.validate(function(t){if(!t)return!1;var r={bu:e.trainForm.product,series:e.trainForm.series,sort:e.trainForm.system,trainingName:e.trainForm.trainName,trainingDes:e.trainForm.description,trainingDuration:e.trainForm.trainTime,type:e.trainForm.trainType,classType:e.trainForm.courseType};e.isEdit?(r.trainingId=e.trainForm.trainId,r.updaterId=e.employeeId):r.creatorId=e.employeeId,e.$store.dispatch("saveTrainingInfo",r).then(function(t){t.success?(e.$message.success("操作成功"),e.dialogVisible=!1,e.getTrainingList(),e.getSeries(),e.getSystem()):"DuplicateName"===t.message?e.$message.error("名称已存在"):e.$message.error("操作失败")})})},clearValidate:function(){this.$refs.trainForm&&this.$refs.trainForm.clearValidate()},getProductInfo:function(){var e=this;e.$store.dispatch("getProductInfo").then(function(t){e.productOptions=t||[]})},getSeries:function(){var e=this;e.$store.dispatch("querySeries").then(function(t){t.data?e.seriesOptions=t.data.map(function(e){return{label:e,value:e}}):e.seriesOptions=[]})},getSystem:function(){var e=this;e.$store.dispatch("querySystem").then(function(t){t.success?e.systemOptions=t.data.map(function(e){return{label:e,value:e}}):e.systemOptions=[]})},handleDel:function(e){var t=this;t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("delTraining",e).then(function(e){e.success?(t.$message.success("操作成功"),t.getTrainingList()):t.$message.error("操作失败")})})},handleEdit:function(e){this.isEdit=!0,this.getProductInfo(),this.getSeries(),this.getSystem(),this.trainForm.trainId=e.trainingId,this.trainForm.trainName=e.trainingName,this.trainForm.description=e.trainingDes,this.trainForm.series=e.series,this.trainForm.system=e.sort,this.trainForm.courseType=e.classType,this.trainForm.trainType=e.type,this.trainForm.trainTime=e.trainingDuration,this.trainForm.product=e.bu,this.dialogTitle="修改培训信息",this.dialogVisible=!0,this.clearValidate()}}},u=c,m=(r("6766"),r("2877")),p=Object(m["a"])(u,i,a,!1,null,null,null);p.options.__file="trainSetting.vue";t["default"]=p.exports},"2f21":function(e,t,r){"use strict";var i=r("79e5");e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},"55dd":function(e,t,r){"use strict";var i=r("5ca1"),a=r("d8e8"),s=r("4bf8"),n=r("79e5"),l=[].sort,o=[1,2,3];i(i.P+i.F*(n(function(){o.sort(void 0)})||!n(function(){o.sort(null)})||!r("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(s(this)):l.call(s(this),a(e))}})},6766:function(e,t,r){"use strict";var i=r("a970"),a=r.n(i);a.a},a970:function(e,t,r){}}]);
//# sourceMappingURL=chunk-6ce9c7ca.ab197ee4.js.map